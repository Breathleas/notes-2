MIT 6.824: Distributed Systems Engineering

http://nil.csail.mit.edu/6.824/2015/schedule.html

#Lecture 1: Introduction

何为分布式系统？
> 多个由网络连接的合作工作的计算机。

<br/>

为何要分布式？
> - 连接物理上分离的实体。
- 通过物理隔离获得安全性。
- 通过在分开的站点上保存副本来进行容错。
- 通过使用并行的CPU/内存/磁盘/网络来提高性能。

<br/>
问题：
> - 复杂化，难于进行调试；
- 新类型的问题，例如：partial failure

建议：能不用分布式就不用= =

##话题：
###1. 体系结构

- 什么样的接口？
- 一个机房还是大跨度的系统？
- 透明性？对用户的呈现与本地文件系统相同；还是用户能够处理一些分布式的功能（查看文件所处服务器、处理故障，等）。
- C/S模式还是peer-to-peer？

所有这些问题都与性能、可用性、错误行为相关。

###2. 实现

- 如何简化网络通信？可以利用一些框架
- 如何应对固有的同时性？线程、锁，等等

###3. 性能

- 分布式带来的问题：
	- 网络带宽和延迟的瓶颈
	- 可以使用一些窍门，例如：caching，并发，pre-fetch
- 分布式同样带来一些好处：并行性，就近选取服务器
- 具有扩展性的设计
- 划分负载：
	- 在多个server上分配数据：切片还是分区？("sharding" vs "partitioning")
	- 按照文件名进行哈希？
	- 由用户决定？
	- 动态地移动文件已以进行负载均衡？
	- 将每个文件条带化（"Stripe"）于各server？
- 性能很难成比例地缩放：
	- 一些操作是全局的，影响所有的server
	- 负载均衡问题：热点文件，服务器工作量不平衡。

###4. 容错（fault tolerance）

目标：

 - 可用性：即使发生故障文件依然可用。思想：在不同服务器上使用副本，并且来自客户端所有的操作在所有副本上执行。因而如果一个服务器宕机还可使用另一个。
 -  持续性

###5. 一致性（consistency）

假设与用户或应用达成一个关于操作的含义的约定。例如：读取操作返回的是最新的被写入的值。那么<font color="#0080FF">**一致性**</font>就是满足这一约定，即使存在故障、副本、高速缓存、并发性，等等这些因素。

问题：

- 保持副本的一致性。
	- 如果一个服务器宕机，那么它可能会错过一些操作，那么必须在服务器重启时使其更新为最新版本。
	- 如果网络状况较差，那么不同的副本可能会看到不同的操作。
 - 客户端所见的操作顺序可能不一致。由caching或副本引起。
- 一致性经常会降低性能。
	- 一些系统会走捷径：弱一致性。
	- 将压力转移到客户应用。
 
##实验一：MapReduce 

MapReduce是一个在上千个机器上进行并行编程的框架。（详细见Google MapReduce文章笔记）。

为什么MapReduce框架很方便？

  - 程序员只需考虑核心任务，即Map和Reduce函数，无需操心分布式相关的问题。
 - 在Map和Reduce之间的按键值聚集对于一些应用1有很大好处（例如单词计数）。
 - 对一些应用可能就不那么友好：因为MapReduce只提供了一种通信。

<br/>
为什么MapReduce有良好的性能？

- Map和Reduce函数在不同的worker上并行地运行。
- 影响性能的原因：
	- 将Map的结果移动到Reduce worker。
	- 掉队者（见Google MapReduce文章）
	- 读写网络文件系统



